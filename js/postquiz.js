var quizdat = {
  "4.1" : {
    question: "What would you prefer: a draw with a 50 percent chance of receiving 450 U.S. dollars, and the same 50 percent chance of receiving nothing, or the amount of 240 U.S. dollars as a sure payment?",
    op1: "4.17",
    op2: "4.2"
  },

  "4.2" : {
    question: "Would you prefer the 50/50 chance or the amount of 120 U.S. dollars as a sure payment?",
    op1: "4.10",
    op2: "4.3"
  },

  "4.3" : {
    question: "Would you prefer the 50/50 chance or the amount of 60 U.S. dollars as a sure payment?",
    op1: "4.4",
    op2: "4.7"
  },

  "4.4" : {
    question: "Would you prefer the 50/50 chance or the amount of 90 U.S. dollars as a sure payment?",
    op1: "4.5",
    op2: "4.6"
  },

  "4.5" : {
    question: "Would you prefer the 50/50 chance or the amount of 105 U.S. dollars as a sure payment",
    op1: "5",
    op2: "5"
  },
  "4.6" : {
    question: "Would you prefer the 50/50 chance or the amount of 75 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },
  "4.7" : {
    question: "Would you prefer the 50/50 chance or the amount of 30 U.S. dollars as a sure payment?",
    op1: "4.8",
    op2: "4.9"
  },

  "4.8" : {
    question: "Would you prefer the 50/50 chance or the amount of 45 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },
  "4.9" : {
    question: "Would you prefer the 50/50 chance or the amount of 15 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.10" : {
    question: "Would you prefer the 50/50 chance or the amount of 180 U.S. dollars as a sure payment?",
    op1: "4.14",
    op2: "4.11"
  },

  "4.11" : {
    question: "Would you prefer the 50/50 chance or the amount of 150 U.S. dollars as a sure payment?",
    op1: "4.13",
    op2: "4.12"
  },

  "4.12" : {
    question: "Would you prefer the 50/50 chance or the amount of 135 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.13" : {
    question: "Would you prefer the 50/50 chance or the amount of 165 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.14" : {
    question: "Would you prefer the 50/50 chance or the amount of 210 U.S. dollars as a sure payment?",
    op1: "4.15",
    op2: "4.16"
  },

  "4.15" : {
    question: "Would you prefer the 50/50 chance or the amount of 225 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.16" : {
    question: "Would you prefer the 50/50 chance or the amount of 195 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.17" : {
    question: "Would you prefer the 50/50 chance or the amount of 360 U.S. dollars as a sure payment?",
    op1: "4.25",
    op2: "4.18"
  },

  "4.18" : {
    question: "Would you prefer the 50/50 chance or the amount of 300 U.S. dollars as a sure payment?",
    op1: "4.22",
    op2: "4.19"
  },

  "4.19" : {
    question: "Would you prefer the 50/50 chance or the amount of 270 U.S. dollars as a sure payment?",
    op1: "4.20",
    op2: "4.21"
  },

  "4.20" : {
    question: "Would you prefer the 50/50 chance or the amount of 285 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.21" : {
    question: "Would you prefer the 50/50 chance or the amount of 255 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.22" : {
    question: "Would you prefer the 50/50 chance or the amount of 330 U.S. dollars as a sure payment?",
    op1: "4.23",
    op2: "4.24"
  },

  "4.23" : {
    question: "Would you prefer the 50/50 chance or the amount of 345 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.24" : {
    question: "Would you prefer the 50/50 chance or the amount of 315 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.25" : {
    question: "Would you prefer the 50/50 chance or the amount of 420 U.S. dollars as a sure payment?",
    op1: "4.29",
    op2: "4.26"
  },

  "4.26" : {
    question: "Would you prefer the 50/50 chance or the amount of 390 U.S. dollars as a sure payment?",
    op1: "4.27",
    op2: "4.28"
  },

  "4.27" : {
    question: "Would you prefer the 50/50 chance or the amount of 405 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.28" : {
    question: "Would you prefer the 50/50 chance or the amount of 375 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.29" : {
    question: "Would you prefer the 50/50 chance or the amount of 450 U.S. dollars as a sure payment?",
    op1: "4.31",
    op2: "4.30"
  },

  "4.30" : {
    question: "Would you prefer the 50/50 chance or the amount of 435 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.31" : {
    question: "Would you prefer the 50/50 chance or the amount of 465 U.S. dollars as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "7.1" : {
    question: "<b>Suppose you were given the choice between receiving a payment today or a payment in 12 months. We will now present to you 5 situations. The payment today is the same in each of these situations. The payment in 12 months is different in every situation. For each of these situations we would like to know which you would choose. Please assume there is no inflation, i.e. future prices are the same as today’s prices.</b> <br><br> Please consider the following: Would you rather receive 160 U.S. dollars today or 246 U.S. dollars in 12 months?",
    op1: "7.17",
    op2: "7.2"
  },

  "7.2" : {
    question: "Would you rather receive 160 U.S. dollars today or 201 U.S. dollars in 12 months?",
    op1: "7.10",
    op2: "7.3"
  },

  "7.3" : {
    question: "Would you rather receive 160 U.S. dollars today or 180 U.S. dollars in 12 months?",
    op1: "7.7",
    op2: "7.4"
  },

  "7.4" : {
    question: "Would you rather receive 160 U.S. dollars today or 170 U.S. dollars in 12 months?",
    op1: "7.6",
    op2: "7.5"
  },

  "7.5" : {
    question: "Would you rather receive 160 U.S. dollars today or 165 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.6" : {
    question: "Would you rather receive 160 U.S. dollars today or 175 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.7" : {
    question: "Would you rather receive 160 U.S. dollars today or 190 U.S. dollars in 12 months?",
    op1: "7.8",
    op2: "7.9"
  },

  "7.8" : {
    question: "Would you rather receive 160 U.S. dollars today or 195 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.9" : {
    question: "Would you rather receive 160 U.S. dollars today or 185 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.10" : {
    question: "Would you rather receive 160 U.S. dollars today or 223 U.S. dollars in 12 months?",
    op1: "7.14",
    op2: "7.11"
  },

  "7.11" : {
    question: "Would you rather receive 160 U.S. dollars today or 212 U.S. dollars in 12 months?",
    op1: "7.13",
    op2: "7.12"
  },

  "7.12" : {
    question: "Would you rather receive 160 U.S. dollars today or 206 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.13" : {
    question: "Would you rather receive 160 U.S. dollars today or 217 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.14" : {
    question: "Would you rather receive 160 U.S. dollars today or 234 U.S. dollars in 12 months?",
    op1: "7.16",
    op2: "7.15"
  },

  "7.15" : {
    question: "Would you rather receive 160 U.S. dollars today or 228 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.16" : {
    question: "Would you rather receive 160 U.S. dollars today or 240 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.17" : {
    question: "Would you rather receive 160 U.S. dollars today or 296 U.S. dollars in 12 months?",
    op1: "7.18",
    op2: "7.25"
  },

  "7.18" : {
    question: "Would you rather receive 160 U.S. dollars today or 323 U.S. dollars in 12 months?",
    op1: "7.22",
    op2: "7.19"
  },

  "7.19" : {
    question: "Would you rather receive 160 U.S. dollars today or 309 U.S. dollars in 12 months?",
    op1: "7.20",
    op2: "7.21"
  },

  "7.20" : {
    question: "Would you rather receive 160 U.S. dollars today or 316 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.21" : {
    question: "Would you rather receive 160 U.S. dollars today or 303 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.22" : {
    question: "Would you rather receive 160 U.S. dollars today or 336 U.S. dollars in 12 months?",
    op1: "7.23",
    op2: "7.24"
  },

  "7.23" : {
    question: "Would you rather receive 160 U.S. dollars today or 343 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.24" : {
    question: "Would you rather receive 160 U.S. dollars today or 329 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.25" : {
    question: "Would you rather receive 160 U.S. dollars today or 270 U.S. dollars in 12 months?",
    op1: "7.29",
    op2: "7.26"
  },

  "7.26" : {
    question: "Would you rather receive 160 U.S. dollars today or 258 U.S. dollars in 12 months?",
    op1: "7.28",
    op2: "7.27"
  },

  "7.27" : {
    question: "Would you rather receive 160 U.S. dollars today or 252 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.28" : {
    question: "Would you rather receive 160 U.S. dollars today or 264 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.29" : {
    question: "Would you rather receive 160 U.S. dollars today or 283 U.S. dollars in 12 months?",
    op1: "7.31",
    op2: "7.30"
  },

  "7.30" : {
    question: "Would you rather receive 160 U.S. dollars today or 277 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.31" : {
    question: "Would you rather receive 160 U.S. dollars today or 290 U.S. dollars in 12 months?",
    op1: "8",
    op2: "8"
  }
}

var curQuesKey = "4.1";
var curQues = null;

var quesEle = document.getElementById("question");
var opABut = document.getElementById("opa");
var opBBut = document.getElementById("opb");

var opA_2But = document.getElementById("opa_2");
var opB_2But = document.getElementById("opb_2");

var part5_div = document.getElementById("radio_1");
var my_radios5 = document.getElementsByName('p5');

var radio2_div = document.getElementById("radio_2");
var r2s = document.getElementsByName('r2');

var log = [];

function loadQuestion() {
  curQues = quizdat[curQuesKey];
  quesEle.innerHTML = curQues.question;
}

function opA() {
  log.push(`${curQuesKey}:1`);
  if (curQues.op1 == "5") {
    part3();
    console.log(log);
    return;
  }

  curQuesKey = curQues.op1;
  //curQues = quizdat[curQues.op1];
  document.getElementById("big_question_intro").style.display = "none";
  loadQuestion();
}

function opB() {
  log.push(`${curQuesKey}:2`);
  if (curQues.op2 == "5") {
    part3();
    console.log(log);
    return;
  }

  curQuesKey = curQues.op2;
  //curQues = quizdat[curQues.op2];
  document.getElementById("big_question_intro").style.display = "none";
  loadQuestion();
}

function part3() {
  document.getElementById("big_question").style.display = "none";
  question.innerHTML = "How do you see yourself: are you a person who is generally willing to take risks, or do you try to avoid taking risks? Please use a scale from 0 to 10, where a 0 means you are “completely unwilling to take risks” and a 10 means you are “very willing to take risks”. You can also use the values in-between to indicate where you fall on the scale. ";
  part5_div.style.display = "block";
  opABut.style.display = "none";
  opBBut.style.display = "none";
}

function part3_next() {
  var radVal = null;

  for (var i = 0; i < my_radios5.length; i++) {
    if (my_radios5[i].checked) {
      radVal = my_radios5[i].value;
      break;
    }
  }

  if (radVal == null)
    return;

  log.push(`5:${radVal}`);
  console.log(log);
  curQuesKey = "7.1";
  //curQues = quizdat2["7.1"];
  part5_div.style.display = "none";
  opA_2But.style.display = "inline";
  opB_2But.style.display = "inline";
  //document.getElementById("big_question").style.display = "inline";
  loadQuestion();
}

function opA_2() {
  log.push(`${curQuesKey}:1`);
  if (curQues.op1 == "8") {
    part5();
    console.log(log);
    return;
  }

  curQuesKey = curQues.op1;
  //curQues = quizdat2[curQues.op1];
  document.getElementById("big_question_intro").style.display = "none";
  loadQuestion();
}

function opB_2() {
  log.push(`${curQuesKey}:2`);
  if (curQues.op2 == "8") {
    part5();
    console.log(log);
    return;
  }

  curQuesKey = curQues.op2;
  //curQues = quizdat2[curQues.op2];
  document.getElementById("big_question").style.display = "none";
  loadQuestion();
}

function part5() {
  question.innerHTML = "In comparison to others, are you a person who is generally willing to give up something today in order to benefit from that in the future or are you not willing to do so? Please use a scale from 0 to 10, where a 0 means you are “completely unwilling to give up something today” and a 10 means you are “very willing to give up something today”.";
  radio2_div.style.display = "block";
  opA_2But.style.display = "none";
  opB_2But.style.display = "none";
}

function r2_next() {
  var radVal = null;

  for (var i = 0; i < r2s.length; i++) {
    if (r2s[i].checked) {
      radVal = r2s[i].value;
      break;
    }
  }

  if (radVal == null)
    return;

  log.push(`8:${radVal}`);
  console.log(log);

  var dt1_str = log.slice(0, 5).join(",");
  var dt2_str = log.slice(6, 11).join(",");

  var url = "postquiz_store.php?" +
    "dt1=" + dt1_str +
    "&dt2=" + dt2_str +
    "&ra1=" + log[5] +
    "&ra2=" + log[11];

  $.ajax({
    url: url,
    success: function(data) {
      console.log("Success postquiz store");
      console.log(data);
      document.location = "demographics.php";
  		//window.location.href = window.location.href.replace("postquiz.php", "demographics.php");
    }
  });

}

loadQuestion();
