var quizdat = {
  "4.1" : {
    question: "What would you prefer: a draw with a 50 percent chance of receiving 300 Euro, and the same 50 percent chance of receiving nothing, or the amount of 160 Euro as a sure payment?",
    op1: "4.17",
    op2: "4.2"
  },

  "4.2" : {
    question: "Would you prefer the 50/50 chance or the amount of 80 Euro as a sure payment?",
    op1: "4.10",
    op2: "4.3"
  },

  "4.3" : {
    question: "Would you prefer the 50/50 chance or the amount of 40 Euro as a sure payment?",
    op1: "4.4",
    op2: "4.7"
  },

  "4.4" : {
    question: "Would you prefer the 50/50 chance or the amount of 60 Euro as a sure payment?",
    op1: "4.5",
    op2: "4.6"
  },

  "4.5" : {
    question: "Would you prefer the 50/50 chance or",
    op1: "5",
    op2: "5"
  },
  "4.6" : {
    question: "Would you prefer the 50/50 chance or the amount of 50 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },
  "4.7" : {
    question: "Would you prefer the 50/50 chance or the amount of 20 Euro as a sure payment?",
    op1: "4.8",
    op2: "4.9"
  },

  "4.8" : {
    question: "Would you prefer the 50/50 chance or the amount of 30 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },
  "4.9" : {
    question: "Would you prefer the 50/50 chance or the amount of 10 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.10" : {
    question: "Would you prefer the 50/50 chance or the amount of 120 Euro as a sure payment?",
    op1: "4.14",
    op2: "4.11"
  },

  "4.11" : {
    question: "Would you prefer the 50/50 chance or the amount of 100 Euro as a sure payment?",
    op1: "4.13",
    op2: "4.12"
  },

  "4.12" : {
    question: "Would you prefer the 50/50 chance or the amount of 90 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.13" : {
    question: "Would you prefer the 50/50 chance or the amount of 110 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.14" : {
    question: "Would you prefer the 50/50 chance or the amount of 140 Euro as a sure payment?",
    op1: "4.15",
    op2: "4.16"
  },

  "4.15" : {
    question: "Would you prefer the 50/50 chance or the amount of 150 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.16" : {
    question: "Would you prefer the 50/50 chance or the amount of 130 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.17" : {
    question: "Would you prefer the 50/50 chance or the amount of 240 Euro as a sure payment?",
    op1: "4.25",
    op2: "4.18"
  },

  "4.18" : {
    question: "Would you prefer the 50/50 chance or the amount of 200 Euro as a sure payment?",
    op1: "4.22",
    op2: "4.19"
  },

  "4.19" : {
    question: "Would you prefer the 50/50 chance or the amount of 180 Euro as a sure payment?",
    op1: "4.20",
    op2: "4.21"
  },

  "4.20" : {
    question: "Would you prefer the 50/50 chance or the amount of 190 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.21" : {
    question: "Would you prefer the 50/50 chance or the amount of 170 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.22" : {
    question: "Would you prefer the 50/50 chance or the amount of 220 Euro as a sure payment?",
    op1: "4.23",
    op2: "4.24"
  },

  "4.23" : {
    question: "Would you prefer the 50/50 chance or the amount of 230 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.24" : {
    question: "Would you prefer the 50/50 chance or the amount of 210 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.25" : {
    question: "Would you prefer the 50/50 chance or the amount of 280 Euro as a sure payment?",
    op1: "4.29",
    op2: "4.26"
  },

  "4.26" : {
    question: "Would you prefer the 50/50 chance or the amount of 260 Euro as a sure payment?",
    op1: "4.27",
    op2: "4.28"
  },

  "4.27" : {
    question: "Would you prefer the 50/50 chance or the amount of 270 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.28" : {
    question: "Would you prefer the 50/50 chance or the amount of 250 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.29" : {
    question: "Would you prefer the 50/50 chance or the amount of 300 Euro as a sure payment?",
    op1: "4.31",
    op2: "4.30"
  },

  "4.30" : {
    question: "Would you prefer the 50/50 chance or the amount of 290 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "4.31" : {
    question: "Would you prefer the 50/50 chance or the amount of 310 Euro as a sure payment?",
    op1: "5",
    op2: "5"
  },

  "7.1" : {
    question: "Please consider the following: would you rather receive 100 Euro today or 154 Euro in 12 months?",
    op1: "7.17",
    op2: "7.2"
  },

  "7.2" : {
    question: "Would you rather receive 100 Euro today or 125 Eur",
    op1: "7.10",
    op2: "7.3"
  },

  "7.3" : {
    question: "Would you rather receive 100 Euro today or 112 Euro in 12 months?",
    op1: "7.7",
    op2: "7.4"
  },

  "7.4" : {
    question: "Would you rather receive 100 Euro today or 106 Euro in 12 months?",
    op1: "7.6",
    op2: "7.5"
  },

  "7.5" : {
    question: "Would you rather receive 100 Euro today or 103 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.6" : {
    question: "Would you rather receive 100 Euro today or 109 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.7" : {
    question: "Would you rather receive 100 Euro today or 119 Euro in 12 months?",
    op1: "7.8",
    op2: "7.9"
  },

  "7.8" : {
    question: "Would you rather receive 100 Euro today or 122 Euro in 12months?",
    op1: "8",
    op2: "8"
  },

  "7.9" : {
    question: "Would you rather receive 100 Euro today or 116 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.10" : {
    question: "Would you rather receive 100 Euro today or 139 Euro in 12 months?",
    op1: "7.14",
    op2: "7.11"
  },

  "7.11" : {
    question: "Would you rather receive 100 Euro today or 132 Euro in 12 months?",
    op1: "7.13",
    op2: "7.12"
  },

  "7.12" : {
    question: "Would you rather receive 100 Euro today or 129 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.13" : {
    question: "Would you rather receive 100 Euro today or",
    op1: "8",
    op2: "8"
  },

  "7.14" : {
    question: "Would you rather receive 100 Euro today or 146 Euro in 12 months?",
    op1: "7.16",
    op2: "7.15"
  },

  "7.15" : {
    question: "Would you rather receive 100 Euro today or 143 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.16" : {
    question: "Would you rather receive 100 Euro today or 150 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.17" : {
    question: "Would you rather receive 100 Euro today or 185 Euro in 12 months?",
    op1: "7.18",
    op2: "7.25"
  },

  "7.18" : {
    question: "Would you rather receive 100 Euro today or 202 Euro in 12 months?",
    op1: "7.22",
    op2: "7.19"
  },

  "7.19" : {
    question: "Would you rather receive 100 Euro today or 193 Euro in 12 months?",
    op1: "7.20",
    op2: "7.21"
  },

  "7.20" : {
    question: "Would you rather receive 100 Euro today or 197 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.21" : {
    question: "Would you rather receive 100 Euro today or 189 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.22" : {
    question: "Would you rather receive 100 Euro today or 210 Euro in 12 months?",
    op1: "7.23",
    op2: "7.24"
  },

  "7.23" : {
    question: "Would you rather receive 100 Euro today or 215 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.24" : {
    question: "Would you rather receive 100 Euro today or 206 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.25" : {
    question: "Would you rather receive 100 Euro today or 169 Euro in 12 months?",
    op1: "7.29",
    op2: "7.26"
  },

  "7.26" : {
    question: "Would you rather receive 100 Euro today or 161 Euro in 12 months?",
    op1: "7.28",
    op2: "7.27"
  },

  "7.27" : {
    question: "Would you rather receive 100 Euro today or 158 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.28" : {
    question: "Would you rather receive 100 Euro today or 165 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.29" : {
    question: "Would you rather receive 100 Euro today or 177 Euro in 12 months?",
    op1: "7.31",
    op2: "7.30"
  },

  "7.30" : {
    question: "Would you rather receive 100 Euro today or 173 Euro in 12 months?",
    op1: "8",
    op2: "8"
  },

  "7.31" : {
    question: "Would you rather receive 100 Euro today or 181 Euro in 12 months?",
    op1: "8",
    op2: "8"
  }
}

var curQuesKey = "4.1";
var curQues = null;

var quesEle = document.getElementById("question");
var opABut = document.getElementById("opa");
var opBBut = document.getElementById("opb");

var opA_2But = document.getElementById("opa_2");
var opB_2But = document.getElementById("opb_2");

var part5_div = document.getElementById("radio_1");
var my_radios5 = document.getElementsByName('p5');

var radio2_div = document.getElementById("radio_2");
var r2s = document.getElementsByName('r2');

var log = [];

function loadQuestion() {
  curQues = quizdat[curQuesKey];
  quesEle.innerHTML = curQues.question;
}

function opA() {
  log.push(`${curQuesKey}:1`);
  if (curQues.op1 == "5") {
    part3();
    console.log(log);
    return;
  }

  curQuesKey = curQues.op1;
  //curQues = quizdat[curQues.op1];
  loadQuestion();
}

function opB() {
  log.push(`${curQuesKey}:2`);
  if (curQues.op2 == "5") {
    part3();
    console.log(log);
    return;
  }

  curQuesKey = curQues.op2;
  //curQues = quizdat[curQues.op2];
  loadQuestion();
}

function part3() {
  question.innerHTML = "In comparison to others, are you a person who is generally willing to give up something today in order to benefit from that in the future or are you not willing to do so? Please use a scale from 0 to 10, where a 0 means you are “completely unwilling to give up something today” and a 10 means you are “very willing to give up something today”.";
  part5_div.style.display = "block";
  opABut.style.display = "none";
  opBBut.style.display = "none";
}

function part3_next() {
  var radVal = null;

  for (var i = 0; i < my_radios5.length; i++) {
    if (my_radios5[i].checked) {
      radVal = my_radios5[i].value;
      break;
    }
  }

  if (radVal == null)
    return;

  log.push(`5:${radVal}`);
  console.log(log);
  curQuesKey = "7.1";
  //curQues = quizdat2["7.1"];
  part5_div.style.display = "none";
  opA_2But.style.display = "inline";
  opB_2But.style.display = "inline";
  loadQuestion();
}

function opA_2() {
  log.push(`${curQuesKey}:1`);
  if (curQues.op1 == "8") {
    part5();
    console.log(log);
    return;
  }

  curQuesKey = curQues.op1;
  //curQues = quizdat2[curQues.op1];
  loadQuestion();
}

function opB_2() {
  log.push(`${curQuesKey}:2`);
  if (curQues.op2 == "8") {
    part5();
    console.log(log);
    return;
  }

  curQuesKey = curQues.op2;
  //curQues = quizdat2[curQues.op2];
  loadQuestion();
}

function part5() {
  question.innerHTML = "In comparison to others, are you a person who is generally willing to give up something today in order to benefit from that in the future or are you not willing to do so? Please use a scale from 0 to 10, where a 0 means you are “completely unwilling to give up something today” and a 10 means you are “very willing to give up something today”.";
  radio2_div.style.display = "block";
  opA_2But.style.display = "none";
  opB_2But.style.display = "none";
}

function r2_next() {
  var radVal = null;

  for (var i = 0; i < r2s.length; i++) {
    if (r2s[i].checked) {
      radVal = r2s[i].value;
      break;
    }
  }

  if (radVal == null)
    return;

  log.push(`8:${radVal}`);
  console.log(log);

  var dt1_str = log.slice(0, 5).join(",");
  var dt2_str = log.slice(6, 11).join(",");

  var url = "postquiz_store.php?" +
    "dt1=" + dt1_str +
    "&dt2=" + dt2_str +
    "&ra1=" + log[5] +
    "&ra2=" + log[11];

  $.ajax({
    url: url,
    success: function(data) {
      console.log("Success postquiz store");
      console.log(data);
      document.location = "demographics.php";
  		//window.location.href = window.location.href.replace("postquiz.php", "demographics.php");
    }
  });

}

loadQuestion();
